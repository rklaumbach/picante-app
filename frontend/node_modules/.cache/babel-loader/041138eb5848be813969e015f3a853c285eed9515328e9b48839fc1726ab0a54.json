{"ast":null,"code":"var _jsxFileName = \"/home/rob/Documents/picante/frontend/src/components/UnsubscribeModal.tsx\",\n  _s = $RefreshSig$();\n// src/components/UnsubscribeModal.tsx\n\nimport React, { useState } from 'react';\nimport Dialog from './Dialog';\nimport Button from './Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UnsubscribeModal = ({\n  isOpen,\n  onClose,\n  userEmail,\n  onUnsubscribeSuccess\n}) => {\n  _s();\n  const [reasons, setReasons] = useState([]);\n  const [additionalFeedback, setAdditionalFeedback] = useState('');\n  const unsubscribeReasons = ['Too expensive', 'Not using the service enough', 'Found a better alternative', 'Privacy concerns', 'Other'];\n  const handleReasonChange = reason => {\n    setReasons(prevReasons => prevReasons.includes(reason) ? prevReasons.filter(r => r !== reason) : [...prevReasons, reason]);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch('/api/unsubscribe', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          reasons,\n          additionalFeedback,\n          email: userEmail\n        })\n      });\n      if (response.ok) {\n        alert('Your subscription has been cancelled. We have sent a confirmation to your email.');\n        onUnsubscribeSuccess();\n        onClose();\n      } else {\n        alert('There was an error processing your request. Please try again later.');\n      }\n    } catch (error) {\n      console.error('Error during unsubscription:', error);\n      alert('An unexpected error occurred. Please try again later.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    isOpen: isOpen,\n    onClose: onClose,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl mb-4\",\n      children: \"We're sorry to see you go!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please let us know why you're unsubscribing:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: unsubscribeReasons.map((reason, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `reason-${index}`,\n            checked: reasons.includes(reason),\n            onChange: () => handleReasonChange(reason),\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `reason-${index}`,\n            children: reason\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"additionalFeedback\",\n          children: \"Additional Feedback (optional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"additionalFeedback\",\n          className: \"w-full mt-2 p-2 border rounded-lg\",\n          rows: 3,\n          value: additionalFeedback,\n          onChange: e => setAdditionalFeedback(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          text: \"Cancel\",\n          className: \"bg-gray-300 text-black mr-4\",\n          onClick: onClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          text: \"Submit\",\n          className: \"bg-red-600 text-white\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(UnsubscribeModal, \"79DVNpIfXi0HIBPeAUIl7guATwU=\");\n_c = UnsubscribeModal;\nexport default UnsubscribeModal;\nvar _c;\n$RefreshReg$(_c, \"UnsubscribeModal\");","map":{"version":3,"names":["React","useState","Dialog","Button","jsxDEV","_jsxDEV","UnsubscribeModal","isOpen","onClose","userEmail","onUnsubscribeSuccess","_s","reasons","setReasons","additionalFeedback","setAdditionalFeedback","unsubscribeReasons","handleReasonChange","reason","prevReasons","includes","filter","r","handleSubmit","e","preventDefault","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","email","ok","alert","error","console","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","index","type","id","checked","onChange","htmlFor","rows","value","target","text","onClick","_c","$RefreshReg$"],"sources":["/home/rob/Documents/picante/frontend/src/components/UnsubscribeModal.tsx"],"sourcesContent":["// src/components/UnsubscribeModal.tsx\n\nimport React, { useState } from 'react';\nimport Dialog from './Dialog';\nimport Button from './Button';\n\ninterface UnsubscribeModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  userEmail: string;\n  onUnsubscribeSuccess: () => void;\n}\n\nconst UnsubscribeModal: React.FC<UnsubscribeModalProps> = ({\n  isOpen,\n  onClose,\n  userEmail,\n  onUnsubscribeSuccess,\n}) => {\n  const [reasons, setReasons] = useState<string[]>([]);\n  const [additionalFeedback, setAdditionalFeedback] = useState('');\n\n  const unsubscribeReasons = [\n    'Too expensive',\n    'Not using the service enough',\n    'Found a better alternative',\n    'Privacy concerns',\n    'Other',\n  ];\n\n  const handleReasonChange = (reason: string) => {\n    setReasons((prevReasons) =>\n      prevReasons.includes(reason)\n        ? prevReasons.filter((r) => r !== reason)\n        : [...prevReasons, reason]\n    );\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('/api/unsubscribe', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n        },\n        body: JSON.stringify({\n          reasons,\n          additionalFeedback,\n          email: userEmail,\n        }),\n      });\n\n      if (response.ok) {\n        alert('Your subscription has been cancelled. We have sent a confirmation to your email.');\n        onUnsubscribeSuccess();\n        onClose();\n      } else {\n        alert('There was an error processing your request. Please try again later.');\n      }\n    } catch (error) {\n      console.error('Error during unsubscription:', error);\n      alert('An unexpected error occurred. Please try again later.');\n    }\n  };\n\n  return (\n    <Dialog isOpen={isOpen} onClose={onClose}>\n      <h2 className=\"text-2xl mb-4\">We're sorry to see you go!</h2>\n      <p>Please let us know why you're unsubscribing:</p>\n      <form onSubmit={handleSubmit}>\n        <div className=\"mt-4\">\n          {unsubscribeReasons.map((reason, index) => (\n            <div key={index} className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id={`reason-${index}`}\n                checked={reasons.includes(reason)}\n                onChange={() => handleReasonChange(reason)}\n                className=\"mr-2\"\n              />\n              <label htmlFor={`reason-${index}`}>{reason}</label>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-4\">\n          <label htmlFor=\"additionalFeedback\">Additional Feedback (optional):</label>\n          <textarea\n            id=\"additionalFeedback\"\n            className=\"w-full mt-2 p-2 border rounded-lg\"\n            rows={3}\n            value={additionalFeedback}\n            onChange={(e) => setAdditionalFeedback(e.target.value)}\n          />\n        </div>\n\n        <div className=\"flex justify-end mt-6\">\n          <Button text=\"Cancel\" className=\"bg-gray-300 text-black mr-4\" onClick={onClose} />\n          <Button text=\"Submit\" className=\"bg-red-600 text-white\" type=\"submit\" />\n        </div>\n      </form>\n    </Dialog>\n  );\n};\n\nexport default UnsubscribeModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}