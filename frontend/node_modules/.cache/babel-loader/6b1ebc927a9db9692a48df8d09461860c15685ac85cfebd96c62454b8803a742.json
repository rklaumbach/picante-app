{"ast":null,"code":"var _jsxFileName = \"/home/rob/Documents/picante/frontend/src/pages/GenerateImagePage.tsx\",\n  _s = $RefreshSig$();\n// src/pages/GenerateImagePage.tsx\n\nimport React, { useState } from 'react';\nimport Header from '../components/Header';\nimport Button from '../components/Button';\nimport PromptInput from '../components/PromptInput';\nimport ImageDisplay from '../components/ImageDisplay';\nimport OutOfCreditsDialog from '../components/OutOfCreditsDialog';\nimport LoginDialog from '../components/LoginDialog';\nimport BottomNav from '../components/BottomNav';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GenerateImagePage = () => {\n  _s();\n  const [bodyPrompt, setBodyPrompt] = useState('');\n  const [facePrompt, setFacePrompt] = useState('');\n  const [generatedImage, setGeneratedImage] = useState('');\n  const [isOutOfCreditsDialogOpen, setIsOutOfCreditsDialogOpen] = useState(false);\n  const [isLoginDialogOpen, setIsLoginDialogOpen] = useState(false);\n  const {\n    isAuthenticated\n  } = useAuth();\n  const handleGenerateImage = async () => {\n    if (!isAuthenticated) {\n      setIsLoginDialogOpen(true);\n      return;\n    }\n    try {\n      const response = await fetch('/api/images/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          bodyPrompt,\n          facePrompt\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setGeneratedImage(data.imageUrl);\n      } else if (response.status === 403 && data.error === 'Out of credits') {\n        setIsOutOfCreditsDialogOpen(true);\n      } else {\n        alert(data.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex flex-col items-center px-7 pb-16 mx-auto w-full max-w-7xl text-white bg-red-500 min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        title: \"Generate Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PromptInput, {\n        label: \"Body Prompt\",\n        value: bodyPrompt,\n        onChange: setBodyPrompt\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PromptInput, {\n        label: \"Face Prompt\",\n        value: facePrompt,\n        onChange: setFacePrompt\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        text: \"Generate\",\n        className: \"mt-6 bg-blue-500 text-white\",\n        onClick: handleGenerateImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), generatedImage && /*#__PURE__*/_jsxDEV(ImageDisplay, {\n        imageUrl: generatedImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OutOfCreditsDialog, {\n      isOpen: isOutOfCreditsDialogOpen,\n      onClose: () => setIsOutOfCreditsDialogOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoginDialog, {\n      isOpen: isLoginDialogOpen,\n      onClose: () => setIsLoginDialogOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BottomNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(GenerateImagePage, \"vilfrWzpzaIwvf8qePajsOKNENo=\", false, function () {\n  return [useAuth];\n});\n_c = GenerateImagePage;\nexport default GenerateImagePage;\nvar _c;\n$RefreshReg$(_c, \"GenerateImagePage\");","map":{"version":3,"names":["React","useState","Header","Button","PromptInput","ImageDisplay","OutOfCreditsDialog","LoginDialog","BottomNav","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","GenerateImagePage","_s","bodyPrompt","setBodyPrompt","facePrompt","setFacePrompt","generatedImage","setGeneratedImage","isOutOfCreditsDialogOpen","setIsOutOfCreditsDialogOpen","isLoginDialogOpen","setIsLoginDialogOpen","isAuthenticated","handleGenerateImage","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","data","json","ok","imageUrl","status","error","alert","console","children","className","title","fileName","_jsxFileName","lineNumber","columnNumber","label","value","onChange","text","onClick","isOpen","onClose","_c","$RefreshReg$"],"sources":["/home/rob/Documents/picante/frontend/src/pages/GenerateImagePage.tsx"],"sourcesContent":["// src/pages/GenerateImagePage.tsx\n\nimport React, { useState } from 'react';\nimport Header from '../components/Header';\nimport Button from '../components/Button';\nimport PromptInput from '../components/PromptInput';\nimport ImageDisplay from '../components/ImageDisplay';\nimport OutOfCreditsDialog from '../components/OutOfCreditsDialog';\nimport LoginDialog from '../components/LoginDialog';\nimport BottomNav from '../components/BottomNav';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst GenerateImagePage: React.FC = () => {\n  const [bodyPrompt, setBodyPrompt] = useState('');\n  const [facePrompt, setFacePrompt] = useState('');\n  const [generatedImage, setGeneratedImage] = useState('');\n  const [isOutOfCreditsDialogOpen, setIsOutOfCreditsDialogOpen] = useState(false);\n  const [isLoginDialogOpen, setIsLoginDialogOpen] = useState(false);\n  const { isAuthenticated } = useAuth();\n\n  const handleGenerateImage = async () => {\n    if (!isAuthenticated) {\n      setIsLoginDialogOpen(true);\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/images/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n        },\n        body: JSON.stringify({ bodyPrompt, facePrompt }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setGeneratedImage(data.imageUrl);\n      } else if (response.status === 403 && data.error === 'Out of credits') {\n        setIsOutOfCreditsDialogOpen(true);\n      } else {\n        alert(data.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred.');\n    }\n  };\n\n  return (\n    <>\n      <main className=\"flex flex-col items-center px-7 pb-16 mx-auto w-full max-w-7xl text-white bg-red-500 min-h-screen\">\n        <Header title=\"Generate Image\" />\n        <PromptInput label=\"Body Prompt\" value={bodyPrompt} onChange={setBodyPrompt} />\n        <PromptInput label=\"Face Prompt\" value={facePrompt} onChange={setFacePrompt} />\n        <Button\n          text=\"Generate\"\n          className=\"mt-6 bg-blue-500 text-white\"\n          onClick={handleGenerateImage}\n        />\n        {generatedImage && <ImageDisplay imageUrl={generatedImage} />}\n      </main>\n      <OutOfCreditsDialog\n        isOpen={isOutOfCreditsDialogOpen}\n        onClose={() => setIsOutOfCreditsDialogOpen(false)}\n      />\n      <LoginDialog\n        isOpen={isLoginDialogOpen}\n        onClose={() => setIsLoginDialogOpen(false)}\n      />\n      <BottomNav />\n    </>\n  );\n};\n\nexport default GenerateImagePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}