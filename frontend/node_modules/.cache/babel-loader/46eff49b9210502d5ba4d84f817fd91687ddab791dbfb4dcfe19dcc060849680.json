{"ast":null,"code":"var _jsxFileName = \"/home/rob/Documents/picante/frontend/src/pages/GenerateImagePage.tsx\",\n  _s = $RefreshSig$();\n// src/pages/GenerateImagePage.tsx\n\nimport React, { useState } from 'react';\nimport Header from '../components/Header';\nimport Button from '../components/Button';\nimport PromptInput from '../components/PromptInput';\nimport ImageDisplay from '../components/ImageDisplay';\nimport OutOfCreditsDialog from '../components/OutOfCreditsDialog';\nimport LoginDialog from '../components/LoginDialog';\nimport BottomNav from '../components/BottomNav';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GenerateImagePage = () => {\n  _s();\n  const [bodyPrompt, setBodyPrompt] = useState('');\n  const [facePrompt, setFacePrompt] = useState('');\n  const [generatedImage, setGeneratedImage] = useState('');\n  const [isOutOfCreditsDialogOpen, setIsOutOfCreditsDialogOpen] = useState(false);\n  const [isLoginDialogOpen, setIsLoginDialogOpen] = useState(false);\n  const {\n    isAuthenticated\n  } = useAuth();\n  const handleGenerateImage = async () => {\n    if (!isAuthenticated) {\n      setIsLoginDialogOpen(true);\n      return;\n    }\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setIsLoginDialogOpen(true);\n        return;\n      }\n      const response = await fetch('/api/images/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          bodyPrompt,\n          facePrompt\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setGeneratedImage(data.imageUrl);\n      } else if (response.status === 403 && data.error === 'Out of credits') {\n        setIsOutOfCreditsDialogOpen(true);\n      } else {\n        alert(`Failed to generate image: ${data.error || response.statusText}`);\n      }\n    } catch (error) {\n      console.error('Error generating image:', error);\n      alert('An error occurred while generating the image.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex flex-col items-center px-7 pb-16 mx-auto w-full max-w-7xl text-white bg-red-500 min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        title: \"Generate Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(PromptInput, {\n          label: \"Body Prompt\",\n          value: bodyPrompt,\n          onChange: setBodyPrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PromptInput, {\n          label: \"Face Prompt\",\n          value: facePrompt,\n          onChange: setFacePrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        text: \"Generate\",\n        className: \"mt-6 bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200\",\n        onClick: handleGenerateImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), generatedImage && /*#__PURE__*/_jsxDEV(ImageDisplay, {\n        imageUrl: generatedImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OutOfCreditsDialog, {\n      isOpen: isOutOfCreditsDialogOpen,\n      onClose: () => setIsOutOfCreditsDialogOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoginDialog, {\n      isOpen: isLoginDialogOpen,\n      onClose: () => setIsLoginDialogOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BottomNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(GenerateImagePage, \"vilfrWzpzaIwvf8qePajsOKNENo=\", false, function () {\n  return [useAuth];\n});\n_c = GenerateImagePage;\nexport default GenerateImagePage;\nvar _c;\n$RefreshReg$(_c, \"GenerateImagePage\");","map":{"version":3,"names":["React","useState","Header","Button","PromptInput","ImageDisplay","OutOfCreditsDialog","LoginDialog","BottomNav","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","GenerateImagePage","_s","bodyPrompt","setBodyPrompt","facePrompt","setFacePrompt","generatedImage","setGeneratedImage","isOutOfCreditsDialogOpen","setIsOutOfCreditsDialogOpen","isLoginDialogOpen","setIsLoginDialogOpen","isAuthenticated","handleGenerateImage","token","localStorage","getItem","response","fetch","method","headers","Authorization","body","JSON","stringify","data","json","ok","imageUrl","status","error","alert","statusText","console","children","className","title","fileName","_jsxFileName","lineNumber","columnNumber","label","value","onChange","text","onClick","isOpen","onClose","_c","$RefreshReg$"],"sources":["/home/rob/Documents/picante/frontend/src/pages/GenerateImagePage.tsx"],"sourcesContent":["// src/pages/GenerateImagePage.tsx\n\nimport React, { useState } from 'react';\nimport Header from '../components/Header';\nimport Button from '../components/Button';\nimport PromptInput from '../components/PromptInput';\nimport ImageDisplay from '../components/ImageDisplay';\nimport OutOfCreditsDialog from '../components/OutOfCreditsDialog';\nimport LoginDialog from '../components/LoginDialog';\nimport BottomNav from '../components/BottomNav';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst GenerateImagePage: React.FC = () => {\n  const [bodyPrompt, setBodyPrompt] = useState('');\n  const [facePrompt, setFacePrompt] = useState('');\n  const [generatedImage, setGeneratedImage] = useState('');\n  const [isOutOfCreditsDialogOpen, setIsOutOfCreditsDialogOpen] = useState(false);\n  const [isLoginDialogOpen, setIsLoginDialogOpen] = useState(false);\n  const { isAuthenticated } = useAuth();\n\n  const handleGenerateImage = async () => {\n    if (!isAuthenticated) {\n      setIsLoginDialogOpen(true);\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setIsLoginDialogOpen(true);\n        return;\n      }\n\n      const response = await fetch('/api/images/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ bodyPrompt, facePrompt }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setGeneratedImage(data.imageUrl);\n      } else if (response.status === 403 && data.error === 'Out of credits') {\n        setIsOutOfCreditsDialogOpen(true);\n      } else {\n        alert(`Failed to generate image: ${data.error || response.statusText}`);\n      }\n    } catch (error) {\n      console.error('Error generating image:', error);\n      alert('An error occurred while generating the image.');\n    }\n  };\n\n  return (\n    <>\n      <main className=\"flex flex-col items-center px-7 pb-16 mx-auto w-full max-w-7xl text-white bg-red-500 min-h-screen\">\n        <Header title=\"Generate Image\" />\n        <div className=\"w-full mt-6\">\n          <PromptInput\n            label=\"Body Prompt\"\n            value={bodyPrompt}\n            onChange={setBodyPrompt}\n          />\n          <PromptInput\n            label=\"Face Prompt\"\n            value={facePrompt}\n            onChange={setFacePrompt}\n          />\n        </div>\n        <Button\n          text=\"Generate\"\n          className=\"mt-6 bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200\"\n          onClick={handleGenerateImage}\n        />\n        {generatedImage && <ImageDisplay imageUrl={generatedImage} />}\n      </main>\n      <OutOfCreditsDialog\n        isOpen={isOutOfCreditsDialogOpen}\n        onClose={() => setIsOutOfCreditsDialogOpen(false)}\n      />\n      <LoginDialog\n        isOpen={isLoginDialogOpen}\n        onClose={() => setIsLoginDialogOpen(false)}\n      />\n      <BottomNav />\n    </>\n  );\n};\n\nexport default GenerateImagePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}